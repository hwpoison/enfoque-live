{% extends "base.html" %}
{% block content %}
<center class="p-4">
<div class="bg-white shadow-md rounded p-4">
  <h2 class="text-xl font-bold mb-4"> 🎛️ Administración</h2>
  <hr class="my-5">
  <a href="{{ url_for('admin.configurations') }}">
    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4">
      Configuraciones
    </button>
  </a>
  <a href="{{ url_for('admin.link_manager') }}">
    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
      Administrar links
    </button>
  </a>
  <hr class="my-4">
  <h3 class="text-xl font-bold mb-4">🧮 Métricas</h3>
  <div class="flex justify-center mb-4 lg:flex-row flex-col">
    <div class="lg:w-1/2 xl:w-1/3">
      <h4 class="text-sm font-bold">Espectadores actuales:</h4>
      <p class="text-2xl font-bold">{{ misc.total_current_viewers }}</p>
    </div>
    <div class="lg:w-1/2 xl:w-1/3">
      <h4 class="text-sm font-bold">Links vendidos:</h4>
      <p class="text-2xl font-bold">{{ misc.all_sold_tokens }}</p>
    </div>
  </div>
  <hr class="my-5">
  <!-- mode setup -->
  <p class="text-xl font-bold mb-4">📌 Modo de streaming actual</p>
  {% if pconfig.stream.mode == 'youtube_live' %}
    <p class="text-green-600 font-bold">Youtube</p>
  {% elif pconfig.stream.mode == 'vimeo_live' %}
    <p class="text-red-600 font-bold">Vimeo</p>
  {% elif pconfig.stream.mode == 'rtmp_local' %}
    <p class="text-red-600 font-bold">RTMP / HLS (Defecto)</p>
  {% elif pconfig.stream_mode == 'rtmp_cdn' %}
    <p class="text-purple-600 font-bold">RTMP CDN</p>
  {% endif %}
  <button class="bg-orange-500 hover:bg-orange-700 text-white font-bold p-2 px-4 rounded"
    onclick="window.open('{{ url_for('admin.monitor')}}', '_blank')">Monitorear transmisión</button>
</div>
</center>
<script>
setInterval(function() {
  location.reload();
}, 10000);
</script>
{% endblock %}